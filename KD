//@version=5
indicator(title="KD指標", shorttitle="KD", overlay=false)
Length = 9
DLength = 3
UpBand = 20
DownBand = 80
vFast = ta.stoch(close, high, low, Length)     // KD的快線
vSlow = ta.sma(vFast, DLength)                 // KD的慢線
vSlow2 = ta.sma(vSlow, DLength)                // KD再平滑一次

K = vSlow
D = vSlow2

plot(K, color=color.blue, title="K")              
plot(D, color=color.red, title="D") 

hline(50, color=color.black, linestyle=hline.style_dashed)  // 在KD中央50處畫出虛線
h1 = hline(UpBand, color=color.red, linestyle=hline.style_dotted)  // 在KD下方20處畫出紅線（點線）
h2 = hline(DownBand, color=color.green, linestyle=hline.style_dotted)  // 在KD上方80處畫出綠線（點線）
fill(h1, h2)
